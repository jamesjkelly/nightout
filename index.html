 <!DOCTYPE html>
<html>

<head>
    <title>NightOut</title>
    <script>

    $(document).ready(function() {//jquery document ready
  var directionsService = new google.maps.DirectionsService();// storing direction service function
  var directionsDisplay = new google.maps.DirectionsRenderer();//storing rendering function
  //var service;
  // var currentLat;
  // var currentLong;
  //var destLat;
  //var destLong;

  // GOOGLE MAPS DIRECTIONS
  google.maps.event.addDomListener(window, "load", function() {
    var places = new google.maps.places.Autocomplete(// adding autocomplete for current location
      document.getElementById("location-input")
    );
    // google.maps.event.addListener(places, "place_changed", function() {
    //   var place = places.getPlace();
    //   var address = place.formatted_address;
    //   var latitude = place.geometry.location.A;
    //   var longitude = place.geometry.location.F;
    // });
  });

  var map = new google.maps.Map(document.getElementById("map"), {
    zoom: 7,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  directionsDisplay.setMap(map);
  directionsDisplay.setPanel(document.getElementById("panel"));

  // GOOGLE PLACES

  google.maps.event.addDomListener(window, "load", function() {
    var places = new google.maps.places.Autocomplete(
      document.getElementById("destination-input")
    );
     google.maps.event.addListener(places, "place_changed", function() {
       var place = places.getPlace();
    //   var address = place.formatted_address;
    //   var latitude = place.geometry.location.A;
    //   var longitude = place.geometry.location.F;
     destLong = place.geometry.viewport.b.b;
     destLat = place.geometry.viewport.f.f;
     });
  });

  $("#search-button").click(function() {
    event.preventDefault();

    var keyword = $("input[type]:checked").val();

    var destination = $("#destination-input").val();

    var request = {
      origin: destination
    };

    var nearbyDestlocation = new google.maps.LatLng(destLat, destLong);

    var nearbyRequest = {
      location: nearbyDestlocation,
      radius: "500",
      keyword: [keyword]
    };

    var service = new google.maps.places.PlacesService(map);
    service.nearbySearch(nearbyRequest, callback);
  });

  function callback(results, status) {
    $(".empty").empty();//empty previous content
      if (status == google.maps.places.PlacesServiceStatus.OK) {
        for (var i = 0; i < results.length && i < 5; i++) {
          var item = results[i];
          var rating = "None";// storing rating if it doesnt exist in json

          if (item.rating) {
            rating = item.rating;//storing rating to value if it does exist
          }

          var hours = "Unknown"; //storing hours if it doesnt exist in json
          if (item.opening_hours) {
            hours = item.opening_hours.open_now;
            if (hours === true) {
              hours = "Yes";//storing hours to yes if true
            } else {
              hours = "No";//storing hours to no if true
            }
          }
          // var addresses = [item.vicinity];
          $(".table").prepend(
            '<tr class = "empty"><td>' +
              item.name +
              "</td><td>" +
              item.vicinity +
              "</td><td>" +
              rating +
              "</td><td>" +
              hours +
              "</td><td>" +
              "<button class='directionsbutton' data-directions=' " +
              item.vicinity +
              "'>Go Here</button>" +
              "</tr>"
          );
        }
        $(".directionsbutton").on("click", function() {
          console.log($(this).attr("data-directions"));

          var selectedMode = document.getElementById("mode").value;// grabbing mode of transport from dropdown menu
          var mode = $("input[mode]:checked").val();
          $("#establishment-input").val($(this).attr("data-directions"));
          var address = $("#location-input").val();
          var destination = $("#establishment-input").val();
          var request = {
            origin: address,
            destination: destination,
            travelMode: google.maps.DirectionsTravelMode[selectedMode]
          };

          directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
              directionsDisplay.setDirections(response);
            }
          });
        });
      }
  }
});

</script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <!-- Jquery Minified -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <!-- GOOGLE MAPS -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBsGih1FDcYzxWH7bhNHgos_OBkYPiiSHw&libraries=places"></script>
</head>

<body class="Site">
    <main class="Site-content">
        <div class="sitehead">
            <center><img src="assets/images/header.png" class="titleimg"></center>
            <div class="navigation">
                <nav>
                    <ul class="homenav">
                        <li><a href="#yelp-spacer">Find a Spot</a></li>
                        <li><a href="#map-spacer">Where You At?</a></li>
                        <li><a href="#lyft-spacer">Get A Ride</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <!-- ELEMENT ONE: YELP -->
        <div id="yelp-spacer"></div>
        <div class="container" id="yelp-container">
            <div class="row">
                <div class="col-md-4" id="search-container">
                    <h3>Find a Spot</h3>
                    <form>
                            <label>Point of Interest</label>
                            <input type="text" class="form-control" id="destination-input">
                        <div class="form-radio">
                            <label class="form-radio-label">
                                <input class="form-radio-input" name="type" type="radio" value="bar"> Bar</label>
                            <label class="form-radio-label">
                                <input class="form-radio-input" name="type" type="radio" value="restaurant"> Restaurant</label>
                            <label class="form-radio-label">
                                <input class="form-radio-input" name="type" type="radio" value="night_club"> Club</label>
                            <label class="form-radio-label">
                                <input class="form-radio-input" name="type" type="radio" value="cafe"> Cafe</label>
                        </div>
                        <label>Current Location</label>
                        <input type="text" class="form-control" id="location-input">
                        <br>
                        <label>Choose Your Transpo'</label>
                        <select id="mode">
                            <option value="DRIVING">Driving</option>
                            <option value="WALKING">Walking</option>
                            <option value="BICYCLING">Bicycling</option>
                            <option value="TRANSIT">Transit</option>
                        </select>
                        <br>
                        <br>
                        <button class="btn btn-primary" id="search-button">Start Your Night</button>
                    </form>
                </div>
                <div class="col-md-8">
                    <div id="results-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Restaurant Name</th>
                                    <th>Address</th>
                                    <th>Rating</th>
                                    <th>Open?</th>
                                    <th>Directions</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- ELEMENT TWO: MAP/DIRECTION -->
        <div id="map-spacer"></div>
        <div class="container" id="map-container">
            <div class="row">
                <div class="col-md-4">
                    <h3>Directions</h3>
                    <span id="establishment-input"></span>
                    <div id="map"></div>
                </div>
                <div class="col-md-8">
                    <div id="directions-div">
                        <div id="panel"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ELEMENT THREE: LYFT BUTTON -->
        <div id="lyft-spacer"></div>
        <div class="container" id="lyft-container">
            <div id="lyft-web-button-parent" class=".lyft-web-button.hot-pink"></div>
        </div>
    </main>
    <footer>
        <h6>Copyright 2017â’¸
        Geanie Blanco, Arvid Johnsen, James Kelly</h6>
    </footer>
    <!-- External JavaScript -->
    <script src="lyft-test.js"></script>
</body>

</html
